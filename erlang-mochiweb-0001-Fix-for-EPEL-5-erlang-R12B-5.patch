From 192949856eec7472594139028bdb0a68fdc633cd Mon Sep 17 00:00:00 2001
From: Peter Lemenkov <lemenkov@gmail.com>
Date: Tue, 8 Jun 2010 14:52:56 +0400
Subject: [PATCH] Fix for EPEL 5 (erlang R12B-5)

---
 src/mochiglobal.erl  |    2 +-
 src/mochiweb.app.src |   10 +++++++++-
 2 files changed, 10 insertions(+), 2 deletions(-)

diff --git a/src/mochiglobal.erl b/src/mochiglobal.erl
index c740b87..a2a8c3a 100644
--- a/src/mochiglobal.erl
+++ b/src/mochiglobal.erl
@@ -33,7 +33,7 @@ put(_K, V, Mod) ->
     code:load_binary(Mod, atom_to_list(Mod) ++ ".erl", Bin),
     ok.
 
--spec delete(atom()) -> boolean().
+-spec delete(atom()) -> atom().
 %% @doc Delete term stored at K, no-op if non-existent.
 delete(K) ->
     delete(K, key_to_module(K)).
diff --git a/src/mochiweb.app.src b/src/mochiweb.app.src
index 5664003..17e7034 100644
--- a/src/mochiweb.app.src
+++ b/src/mochiweb.app.src
@@ -2,7 +2,15 @@
 {application, mochiweb,
  [{description, "MochiMedia Web Server"},
   {vsn, "1.3"},
-  {modules, []},
+  {modules, [mochifmt,mochifmt_records,mochifmt_std,mochiglobal,
+                        mochihex,mochijson,mochijson2,mochilists,mochinum,
+                        mochitemp,mochiutf8,mochiweb,mochiweb_app,
+                        mochiweb_charref,mochiweb_cookies,mochiweb_cover,
+                        mochiweb_echo,mochiweb_headers,mochiweb_html,
+                        mochiweb_http,mochiweb_io,mochiweb_mime,
+                        mochiweb_multipart,mochiweb_request,mochiweb_response,
+                        mochiweb_skel,mochiweb_socket,mochiweb_socket_server,
+                        mochiweb_sup,mochiweb_util,reloader]},
   {registered, []},
   {mod, {mochiweb_app, []}},
   {env, []},
-- 
1.6.6.1

